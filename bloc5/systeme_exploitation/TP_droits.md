# les droits
--- 

## création d'un utilisateur

vous pouvez voir tous les utilisteur d'une machine dans le fichier "/etc/passwd"

vous pouvoir voir qu'il y a beaucoup d'informations dans ce fichiers, pour y voir plus clair, voici comment comprendre ce fichier:
on peut comprendre ce fichier comme un tableau dont chaque ligne a plusieur colonnes:
 - le nom de l'utilisteur
 - le mot de passe de l'utilisateur (remplacé par un x bien sûre, il n'aparaitra jamais en clair)
 - son identificateur
 - l'identificateur de son groupe principale
 - un commentaire
 - son repertoire HOME
 - le shell utilisé

vous pouvez connaitre votre nom d'utilisateur grâce a la commande : "whoami"

questions:
- combiens y a-t-il d'utilisateurs sur la machine (utilisez la commande "wc -l" (word count avec lignes comme attribut) avec le pipe)
- quel est votre ID?
- quel est votre ID de groupe?

vous pouvez voir tous les groupes d'une machine dans le fichier "/etc/group"

vous pouvoir voir qu'il y a beaucoup d'informations dans ce fichiers, pour y voir plus clair, voici comment comprendre ce fichier:
on peut aussi comprendre ce fichier comme un tableau dont chaque ligne a plusieur colonnes:
- le nom du groupe
- son mot de passe
- son identificateur

questions:
- quel est l'ID de votre groupe principale?
- comment se nomme-t-il?

(vous pouvez utilisez la commande "grep" pour trier les output des autres commandes)

grep s'utilise en conjonction d'une autre commande grâce à un pipe "|", un pipe permet d'enchainer les commandes et de passer le résultat de la commande précédente à la suivante

exemple:

- $ls -l | grep ^d

cette commande permet de lister tout ce qui est contenu dans le repertoire courant (ls -l), l'output est donné à grep, qui se charge de trier en fonction de ce qui est donné en parametre, ici, je demande toutes les lignes qui commencent par un d ("^" etant le caractere de debut de ligne)

vous pouvez créer un tuilisateur grâce à la commande : "useradd", elle prend en parametre un nom d'utilisateur. pour faciliter le tout, nous allons attribuer à cet utilisateur un dossier HOME, pour cela, utilisez l'attribut "-m" de "useradd"

verifier que le dossier HOME a bien été crée. Pour cela, utilisez la commande "ls -l /home" afin de lister tout les dossier HOME sur votre machine

le nouvel utilisateur a été crée, nous pouvons maintenant accorder des droits aux differennts fichiers

## les droits

changez d'utilisateur avec la commande "su", cette commande permet de Changer d'Utilisateur, si aucun argument n'est donné, l'utilisateur devient le ROOT de la machine, l'administrateur qui peut absolument tout faire. sinon, on peut passer en argument un nom d'utilisateur pour en modifier son mot de passe (si vous en avez les droits bien sûre).

pour gagner les droits de root temporairement (le temps d'une commande), utilisez sudo avant une commande

exemple:

- $sudo ls -l

cette commande utilise les droits d'administrateur afin d'afficher le contenu du dossier courant (inutile d'utiliser les droits d'administrateur pour cela, c'est juste pour l'exemple)

pour bien se deconnecter quand on change d'utilisateur, utilisez la commande exit

connectez vous avec votre nouvel utilisateur depuis votre utilisateur de base.

vous ne pouvez pas vous connecter avec votre nouvel utilisateur car vous ne lui avez pas accorder de mot de passe
de base, un nouvel utilisateur reçoit un mot de passe "invalid" qui ne peut pas être correct du tout, le seul à pouvoir se connecter a votre nouveau compte est ROOT jusqu'a ce que vous ayez octroyer à votre utilisateur un mot de passe.

pour cela, passer en ROOT et utilisez la commande "passwd", **sans parametres, cette commande permet de modifier le mot de passe de l'utilisateur courant**, changez uniquement le mot de passe de votre nouvel utilisateur en passant en parametre le nom de votre nouvel utilisateur

connectez vous avec votre nouvel utilisateur depuis votre utilisateur de base en utilisant le mot de passe que vous venez d'octroyer et aller dans son dossier HOME

depuis ce dossier, créez un fichier "texte.txt"

questions:
- quel est son proprietaire?
- quel est son groupe prioritaire?
- quels sont ses droits?

revenez à l'utilisateur de base (le commande exit) et essayez la commande "ls -l /home/nom-nouvel-utilisateur"

questions:
- que se passe-t-il?
- quels sont les droits accordé de base

affichez l'interieur de "texte.txt"

questions:
- que se passe-t-il?
- quels sont les droits accordé de base?

afin de séparer les espaces de stockage et pour des raisons de sécurité et confidentialité, on ne souhaite pas qu'un utilisateur puisse acceder de base aux fichiers d'un utilisateur, faites en sorte de supprimer les droits de lecture

verifier que vous n'avez plus accées au fichier

créez un hello world en bash sur votre bureau (juste un ficher avec dedans:

echo "hello world"

), sauvegardez ce qui est necessaire:

questions:
- quel sont les droits de ce fichier?

le commande './' permet d'executer un fichier

executez le script bash aprés lui avoir octroyé les bons droits

deconnectez vous pour vous connecter à votre autre compte crée.

tapez la commande "whoami"
- quel utilisateur êtes-vous?

essayez d'acceder a votre fichier "texte.txt"

essayez d'acceder au script hello world sur le bureau de votre utilisateur principale

questions:
- que se passe-t-il?

donnez les droits de lecture à votre nouvel utilisateur sur votre script hello world et à tout les dossier necessaires

executez le script

donnez les droits d'executions à votre nouvel utilisateur sur votre script hello world et à tout les dossier necessaires

executez votre script

peut-on executez un script sans avoir les droits de lecture?

peut-on acceder a un dossier sans les droits de lectures mais en ayant les droits d'execution? 

peut on acceder a un sous dossier sans avoir les droits de lecture du dossier parent mais en ayant un droit d'execution sur les deux? 

reconnectez vous sur votre compte principale et supprimez le nouvel utilisateur (commande: userdel -r nom-nouvel-utilisateur)
